function hasScrolled(){var a=$(this).scrollTop();Math.abs(lastScrollTop-a)<=delta||(a>lastScrollTop&&a>navbarHeight?$("#js-site-header").removeClass("nav-down").addClass("is-hidden"):a+$(window).height()<$(document).height()&&$("#js-site-header").removeClass("is-hidden").addClass("nav-down"),lastScrollTop=a)}function initiateMasonryGrid(){var a=document.querySelector(".masonry-grid"),b=new Masonry(a,{itemSelector:".masonry-grid-item",columnWidth:".masonry-grid-sizer",percentPosition:!0,gutter:".masonry-gutter-sizer",transitionDuration:0,horizontalOrder:!0});imagesLoaded(document.querySelector(".masonry-grid"),function(a){b.layout()})}!function(a,b,c){"use strict";a.fn.mousewheelStopPropagation=function(b){function c(a){a.preventDefault(),a.stopPropagation(),"function"==typeof b.wheelstop&&b.wheelstop(a)}b=a.extend({wheelstop:null},b);var d=navigator.userAgent.toLowerCase(),e=/(trident|msie)/.test(d),f=document.documentElement,g="mousewheel";return"onmousewheel"in f?g="mousewheel":"onwheel"in f?g="wheel":"DOMMouseScroll"in f&&(g="DOMMouseScroll"),g?this.each(function(){var b=this,d=a(b);d.on(g,function(a){var f=a.originalEvent,g=b.scrollTop,h=b.scrollHeight-d.outerHeight(),i=-f.wheelDelta;isNaN(i)&&(i=f.deltaY);var j=i<0;if(j&&g<=0||!j&&g>=h)c(a);else if(e){var k={duration:200,easing:"linear"};j&&-i>g?(d.stop(!0).animate({scrollTop:0},k),c(a)):!j&&i>h-g&&(d.stop(!0).animate({scrollTop:h},k),c(a))}})}):this}}(jQuery,window),$(".js-site-nav-btn").click(function(a){a.preventDefault(),$(this).find(".js-site-nav-icon").toggleClass("i-menu").toggleClass("i-cross"),$(".js-site-nav").toggle()});var didScroll,lastScrollTop=0,delta=5,navbarHeight=$("header").outerHeight();$(window).scroll(function(a){didScroll=!0}),setInterval(function(){didScroll&&(hasScrolled(),didScroll=!1)},250),Barba.Dispatcher.on("newPageReady",function(){console.log("newPageReady");var a=document.querySelector(".masonry-grid");a&&initiateMasonryGrid()}),document.addEventListener("DOMContentLoaded",function(){console.log("DOMContentLoaded")}),document.addEventListener("DOMContentLoaded",function(){var a=Barba.BaseTransition.extend({start:function(){Promise.all([this.newContainerLoading,this.fadeOutDown()]).then(this.movePages.bind(this))},fadeOutDown:function(){history.scrollRestoration="manual";var a=this.oldContainer;Barba.Utils.deferred();return a.classList.add("animate-fade-out-down"),new Promise(function(b,c){a.addEventListener("animationend",function(a){b()},!1)})},scrollTop:function(){console.log("test")},movePages:function(){function a(){c.addEventListener("animationend",function a(){b.done(),c.classList.remove("animate-fade-in"),c.removeAttribute("style"),c.removeEventListener("animationend",a)})}window.scrollTo(0,0),console.log("Just finished scrolling to "+window.pageYOffset+" px");var b=this;this.updateLinks();var c=this.newContainer;this.oldContainer;c.classList.add("animate-fade-in"),a()},updateLinks:function(){var a=this.newContainer.querySelector("#js-back-btn");a&&(a.href="javascript:history.back()")}});Barba.Pjax.getTransition=function(){return a},Barba.Pjax.Dom.wrapperId="js-page-body",Barba.Pjax.Dom.containerClass="js-page",Barba.Pjax.start()});